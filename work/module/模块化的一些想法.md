关于用 `Rust` 实现模块化的一些产生尝试。

## 我认为的模块化

模块化就是将整个 `os` 分开，将不同的功能放到不同的 `crate` 里，提高内聚，降低耦合，不同模块与不同模块之间降低依赖性。 
降低耦合的方法就是利用统一抽象层来操作模块，模块尽量不直接接触模块，而是通过统一的接口去调度，降低耦合性。

所以就需要找到一种方法让模块之间不直接接触也能互相感知

## 关于模块化的一些尝试

### 1. 过程宏
[[尝试利用宏实现模块化的相关信息]]
通过宏实现模块化有了一些障碍，然后我又开始寻找其他的方式。

## 2. Rust 的静态链接
在逐渐寻找模块化方式的过程中，我发现了 `Rust` 的库 `Inventory` ，然后又找到了 `linkme`，这两个库实现了 `Rust` 的静态链接。他们两个功能有重叠，但是实现的方式不同，`Inventory` 利用的是在 `main` 函数之前执行初始化函数注入，`linkme` 是直接利用链接功能注入。而且 `Inventory` 不支持裸机平台开发，`linkme` 现在已经支持。
[[段链接工具]]

## 模块化的一些知识

没有顶层设计、模块划分的应用就像一团打结的毛线，代码分支可能会跳来跳来，没有边界。很难理清楚内部的业务逻辑，更糟糕的是随着需求的堆积，日积月累更难理清楚内部的模块划分，所以从一开始就应该定好系统的模块，确定好边界之后才知道每一部分往哪里放。